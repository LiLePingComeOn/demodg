<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.mapper.ReportMapper">
    <resultMap id="BaseResultMap" type="com.example.demo.entity.report">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Nov 08 19:58:11 CST 2018.
        -->
        <id column="id"  property="id" />
        <result column="devicefk"  property="devicefk" />
        <result column="comtemperature"  property="comtemperature" />
        <result column="calibrationvalue"  property="calibrationvalue" />
        <result column="ktdevicefk"  property="ktdevicefk" />
        <result column="meanvalue"  property="meanvalue" />
        <result column="variancevalue"  property="variancevalue" />
        <result column="emssing"  property="emissing" />
        <result column="absolutedeviation"  property="absolutedeviation" />
        <result column="maxvalue"  property="maxvalue" />
        <result column="sys_user"  property="sys_user" />
        <result column="cretime"  property="cretime" />
        <result column="minvalue"  property="minvalue" />
        <result column="fluctucationrange"  property="fluctucationrange" />
        <result column="status"  property="status" />
        <result column="spacing"  property="spacing" />
        <result column="factory"  property="factory" />
    </resultMap>
    <sql id="Base_Column_List">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Nov 08 19:58:11 CST 2018.
        -->
        id, devicefk, comtemperature, calibrationvalue,ktdevicefk,meanvalue,variancevalue,emssing,absolutedeviation,`maxvalue`,sys_user,cretime,`minvalue`,`fluctucationrange`,status,spacing,factory
    </sql>


        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Nov 08 19:58:11 CST 2018.
        -->
        <select id="selectKtDeviceByBlack"  parameterType="String" resultType="Map">
            <!--
              WARNING - @mbg.generated
              This element is automatically generated by MyBatis Generator, do not modify.
              This element was generated on Thu Nov 08 19:58:11 CST 2018.
            -->
            select
            DISTINCT ktdevicefk
            from report
            where devicefk = #{devicefk}
        </select>



    <select id="selectAllBySn"  parameterType="String" resultType="Map">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Nov 08 19:58:11 CST 2018.
        -->
        select
        re.id, re.devicefk, re.comtemperature, re.calibrationvalue,re.ktdevicefk,re.meanvalue,re.variancevalue,re.emssing,re.absolutedeviation,re.`maxvalue`,re.sys_user,re.cretime,re.`minvalue`,re.`fluctucationrange`,re.status,re.spacing,fa.name
        from report re
        left join factory fa  on re.factory = fa.id
        where devicefk = #{devicefk}
        <if test="status != null  and status != ''">
            and tem.status = #{status}
        </if>
    </select>

    <insert id="insertReport" parameterType="com.example.demo.entity.report">
        insert into report
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null  and id != ''">id,</if>
            <if test="devicefk != null  ">devicefk,</if>
            <if test="comtemperature != null ">comtemperature,</if>
            <if test="calibrationvalue != null ">calibrationvalue,</if>
            <if test="ktdevicefk != null ">ktdevicefk,</if>
            <if test="meanvalue != null ">meanvalue,</if>
            <if test="variancevalue != null ">variancevalue,</if>
            <if test="emssing != null ">emssing,</if>
            <if test="absolutedeviation != null ">absolutedeviation,</if>
            <if test="maxvalue != null ">`maxvalue`,</if>
            <if test="sys_user != null ">sys_user,</if>
            <if test="cretime != null ">cretime,</if>
            <if test="minvalue != null ">`minvalue`,</if>
            <if test="fluctucationrange != null ">`fluctucationrange`,</if>
            <if test="status != null ">status,</if>
            <if test="spacing != null ">spacing,</if>
            <if test="factory != null ">factory,</if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null">
                #{id},
            </if>
            <if test="devicefk != null">
                #{devicefk},
            </if>
            <if test="comtemperature != null">
                #{comtemperature},
            </if>
            <if test="calibrationvalue != null">
                #{calibrationvalue},
            </if>
            <if test="ktdevicefk != null">
                #{ktdevicefk},
            </if>
            <if test="meanvalue != null">
                #{meanvalue},
            </if>
            <if test="variancevalue != null">
                #{variancevalue},
            </if>
            <if test="emssing != null">
                #{emssing},
            </if>
            <if test="absolutedeviation != null">
                #{absolutedeviation},
            </if>
            <if test="maxvalue != null">
                #{maxvalue},
            </if>
            <if test="sys_user != null">
                #{sys_user},
            </if>
            <if test="cretime != null">
                #{cretime},
            </if>
            <if test="minvalue != null">
                #{minvalue},
            </if>
            <if test="fluctucationrange != null">
                #{fluctucationrange},
            </if>
            <if test="status != null">
                #{status},
            </if>
            <if test="spacing != null">
                #{spacing},
            </if>
            <if test="factory != null">
                #{factory},
            </if>

        </trim>

    </insert>

    <update id="updateReportStatus" parameterType="String">
        update report
        set status = #{status}
        where devicefk = #{devicefk}
    </update>

    <update id="updateReportStatusByCom" parameterType="String">
        update report
        set status = #{status}
        where devicefk = #{devicefk} and comtemperature  = #{comtemperature}
    </update>

    <update id="updateReport" parameterType="com.example.demo.entity.temperature">
        update report
        <trim prefix="SET" suffixOverrides=",">
            <if test="id != null  and id != ''">id = #{id},</if>
            <if test="devicefk != null  and devicefk != ''">devicefk = #{devicefk},</if>
            <if test="comtemperature != null ">comtemperature = #{comtemperature},</if>
            <if test="calibrationvalue != null ">calibrationvalue = #{calibrationvalue},</if>
            <if test="ktdevicefk != null ">ktdevicefk = #{ktdevicefk},</if>
            <if test="meanvalue != null ">meanvalue = #{meanvalue},</if>
            <if test="variancevalue != null ">variancevalue = #{variancevalue},</if>
            <if test="emssing != null ">emssing = #{emssing},</if>
            <if test="absolutedeviation != null ">absolutedeviation = #{absolutedeviation},</if>
            <if test="sys_user != null ">sys_user = #{sys_user},</if>
            <if test="cretime != null ">cretime = #{cretime},</if>
            <if test="maxvalue != null ">`maxvalue` = #{maxvalue},</if>
            <if test="minvalue != null ">`minvalue` = #{minvalue},</if>
            <if test="fluctucationrange != null ">`fluctucationrange` = #{fluctucationrange},</if>
            <if test="status != null ">status = #{status},</if>
            <if test="spacing != null ">spacing = #{spacing},</if>
            <if test="factory != null ">factory = #{factory},</if>
        </trim>
        where id = #{id}
    </update>

    <delete id="deleteReportByCom" parameterType="String">
        delete from report where devicefk = #{devicefk} and comtemperature = #{comtemperature}
    </delete>

    <delete id="deleteTwoTJkjcByIds" parameterType="String">
        delete from temperature where ID in
        <foreach item="id" collection="array" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>

</mapper>